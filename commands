prefix = "-"

-- loading
repeat
    task.wait()
until game:IsLoaded()
repeat
    task.wait()
until game.Players.LocalPlayer.Character
game.Players.LocalPlayer.Character:WaitForChild("PowerOutput")
game.Players.LocalPlayer.Character:WaitForChild("Race")
-- variables
function getVars()
    plr = game.Players.LocalPlayer
    char = game.Players.LocalPlayer.Character
    bp = game.Players.LocalPlayer.Backpack
    hrp = game.Players.LocalPlayer.Character.HumanoidRootPart
end
rs = game:GetService("RunService")
tws = game:GetService("TweenService")
ts = game:GetService("TeleportService")
local RSKey = nil
local redSpam = false
local autoFarm = false
local speedToggle = false
getVars()
game.Players.LocalPlayer.CharacterAdded:Connect(function()
    getVars()
end)
-- tables
Commands = {
    "cmds | displays the list of cmds";
    "earth | TPs to earth";
    "namek | TPs to Namek";
    "space | TPs to Space";
    "future | TPs to Future";
    "sw | TPs to Secret World";
    "zaros | TPs to Zaros";
    "queue | TPs to Queue World";
    "south | TPs to South City";
    "west | TPs to West City";
    "spawn | TPs to Chi-Chi's house (Low Level Spawn)";
    "lookout | TPs to Kami's Lookout";
    "goto [name] | TPs to a player/npc (You don't have to specify the whole name)";
    "glitch [name] | Attempts to glitch the player you specify (Needs bone crush)";
    "jarspam (on/off) | Enables/Disables jarspam. Recommended Reds";
    "stats [name] | Prints the player's stats in F9";
    "slot (1/2/3) | Switches to the specified slot (must be 1, 2 or 3)";
    "rkey (key) | allows you to respawn with the key you specified [Default key is 'L']";
    "cy | chat spy"

}
Worlds = {
    536102540; -- earth 1
    882399924; -- namek 2
    478132461; -- space 3
    569994010; -- future 4
    2046990924; -- sw 5 
    2651456105; -- zaros 6
    3565304751; -- queue 7
    2050207304; -- broly 8
    535527772; -- top 9
    3552158750; -- htop 10
    882375367; -- htc 11
    3552157537; -- heaven 12
}
HairRaces = {
    "Saiyan";
    "Human";
    "Android"
} 
-- functions
function notif(Title,Message) -- my old cmd notify func cus I can't remember how to make it
    game:GetService("StarterGui"):SetCore(
        "SendNotification",
        {
            Title = Title,
            Text = Message
        }
    )
end
function checks()
    if not table.find(Worlds,game.placeId) then notif("not in FS",".") return end
    if not plr:FindFirstChild("aloof_active") then
        local cmds = Instance.new("Folder")
        cmds.Name = "aloof_active"
        cmds.Parent = plr
        notif("Commands:","Now active")
        notif("Commands:","Type "..prefix.."cmds")
    else
        notif("commands already on",".") 
        return true
    end
end
if checks() then
    return
end
function findent(targ)
    for i,v in pairs(game.Workspace.Live:GetChildren()) do
        local targ = targ:lower()
        if string.find(v.Name:lower(),targ) then
            return v
        end
    end
end
function instaR()
    if not table.find(HairRaces,char.Race.Value) or game.placeId ~= Worlds[1] then
        local currentPos = hrp.CFrame
        local hum = char.Humanoid
        hum.Health = 0
        plr.CharacterAdded:Wait()
        local cfl = rs.Stepped:Connect(function()
            hrp.CFrame = currentPos
        end)
        task.wait(1)
        cfl:Disconnect()
    else
        local currentPos = hrp.CFrame
        local cfl = rs.Stepped:Connect(function()
            hrp.CFrame = currentPos
        end)
        print(currentPos)
        bp.ServerTraits.ChatStart:FireServer(workspace.FriendlyNPCs:FindFirstChild("Hair Stylist"))
        repeat task.wait() bp.ServerTraits.ChatAdvance:FireServer({"Yes"}) until plr.PlayerGui.HUD.Bottom.ChatGui.TextLabel.Text == "Alright"
        repeat task.wait() bp.HairScript.RemoteEvent:FireServer("woah") until char.Parent == game.Workspace.Live
        plr.CharacterAdded:Wait()
        print("Char Added")
        repeat task.wait() until plr.Character:FindFirstChild("HumanoidRootPart")
        print"HRP Found"
        repeat task.wait() until plr.PlayerGui:FindFirstChild("HUD")
        print("HUD Found")
        cfl:Disconnect()
    end
    return true
end
function getDist(pos)
    local dist = (hrp.Position - pos).Magnitude
    return dist
end
function HairRace()
    if table.find(HairRaces,char.Race.Value) and game.placeId == Worlds[1] then
        return true
    end
end
function jarSpam()
    while redSpam do
        print("Spamming Reds")
        bp.ServerTraits.EatSenzu:FireServer("")
        instaR()
        task.wait(0.3)
    end
end
function speedSpam(speed)
    while speedToggle == true do
        for i,v in pairs(getconnections(bp.ServerTraits.Input.OnClientEvent)) do
            v:Fire({speed})
        end;
        wait()
    end
end
-- commands
cmdline = plr.Chatted:Connect(function(chat)
    chat2 = chat:lower()
    splits = chat2:split(" ")
    if splits[1] == prefix.."cmds" then
        notif("Cmds","Commands printed in F9")
        for i,v in pairs(Commands) do
            print(prefix..v)
        end
    elseif splits[1] == prefix.."dcmd" then
    cmdline:Disconnect()
    plr:FindFirstChild("aloof_active"):Destroy()
    elseif splits[1] == prefix.."earth" then
        ts:Teleport(Worlds[1])
    elseif splits[1] == prefix.."namek" then
        ts:Teleport(Worlds[2])
    elseif splits[1] == prefix.."space" then
        ts:Teleport(Worlds[3])
    elseif splits[1] == prefix.."future" then
        ts:Teleport(Worlds[4])
    elseif splits[1] == prefix.."sw" then
        ts:Teleport(Worlds[5])
    elseif splits[1] == prefix.."zaros" then
        ts:Teleport(Worlds[6])
    elseif splits[1] == prefix.."queue" then
        ts:Teleport(Worlds[7])
    elseif splits[1] == prefix.."south" then
        tws:Create(hrp, TweenInfo.new(getDist(Vector3.new(-453.57431, 57.9347725, -6575.44092))/3000,Enum.EasingStyle.Linear), {CFrame = CFrame.new(-453.57431, 57.9347725, -6575.44092)}):Play()
    elseif splits[1] == prefix.."west" then
        tws:Create(hrp, TweenInfo.new(getDist(Vector3.new(-575.637085, 79.3019257, -2633.33252))/3000,Enum.EasingStyle.Linear), {CFrame = CFrame.new(-575.637085, 79.3019257, -2633.33252)}):Play()
    elseif splits[1] == prefix.."spawn" then
        tws:Create(hrp, TweenInfo.new(getDist(Vector3.new(-5987.10303, 51.8033142, -4153.27441))/3000,Enum.EasingStyle.Linear), {CFrame = CFrame.new(-5987.10303, 51.8033142, -4153.27441)}):Play()
    elseif splits[1] == prefix.."lookout" then
        tws:Create(hrp, TweenInfo.new(getDist(Vector3.new(2523.55615, 3950.30371, -2274.13965))/3000,Enum.EasingStyle.Linear), {CFrame = CFrame.new(2523.55615, 3950.30371, -2274.13965)}):Play()
    elseif splits[1] == prefix.."goto" then
        if splits[2] and findent(splits[2]) then
            local targ = findent(splits[2])
            local dist = getDist(findent(splits[2]).HumanoidRootPart.Position)
            tws:Create(hrp, TweenInfo.new(dist/6000,Enum.EasingStyle.Linear), {CFrame = targ.PrimaryPart.CFrame * CFrame.new(0,0,5)}):Play()
        end
    elseif splits[1] == prefix.."glitch" then
        if splits[2] and findent(splits[2]) then
            local targ = findent(splits[2])
            local bc = bp:FindFirstChild("Bone Crush") or char:FindFirstChild("Bone Crush")
            if not bc then 
                notif("Commands:","Bone Crush required")
                return 
            end
            bc.Parent = char
            repeat
                local dist = getDist(targ.HumanoidRootPart.Position)
                task.wait()
                tws:Create(hrp,TweenInfo.new(dist/3000,Enum.EasingStyle.Linear), {CFrame = targ.HumanoidRootPart.CFrame * CFrame.new(0,0,3)}):Play()
                bc:Activate()
            until targ:FindFirstChild("MoveStart")
            bc.Parent = bp
            if HairRace() then
                instaR()
            else
                ts:TeleportToPlaceInstance(game.placeId, game.jobId)
            end
            targ:FindFirstChild("MoveStart"):Destroy()
            targ:FindFirstChild("Action"):Destroy()
        end
    elseif splits[1] == prefix.."jarspam" then
        if splits[2] == "on" then
            redSpam = true
            jarSpam()
        elseif splits[2] == "off" then
            redSpam = false
            print("false")
        end
    elseif splits[1] == prefix.."stats" then
        if splits[2] and findent(splits[2]) then
            local targ = findent(splits[2])
            notif("Stat Check","Check f9 menu")
            local statsFolder = targ.Stats
            function getLvl()
                for i,v in pairs(targ:GetChildren()) do
                    if v.Name:find("Lvl") then
                        return v.Name:split("Lvl. ")[2]
                    end
                end
            end
            print("-----------------" .. targ.Name .. "-----------------")
            print("Level: " .. getLvl())
            print("Race: " .. targ.Race.Value)
            for i,v in pairs(statsFolder:GetChildren()) do
                print("[" .. v.Name .. "]: " .. v.Value)
            end
            if targ:FindFirstChild("RebirthWings") then
                print("[Extra]: Rebirth")
            elseif targ:FindFirstChild("RealHalo") then
                print("[Extra]: Heaven")
            else
                print("[Extra]: Pure")
            end
        else
            notif("no","you gotta specify a name")
        end
    elseif splits[1] == prefix.."slot" then
        if splits[2] and table.find({"1","2","3"},splits[2]) then
            local slotNum = tonumber(splits[2])
            local textLabel = plr.PlayerGui.HUD.Bottom.ChatGui.TextLabel
            local currCF = hrp.CFrame
            bp.ServerTraits.ChatStart:FireServer(workspace:WaitForChild("FriendlyNPCs"):WaitForChild("Character Slot Changer"))
            repeat task.wait() bp.ServerTraits.ChatAdvance:FireServer({"Yes"}) until textLabel.text == "Alright"
            repeat task.wait() bp.ServerTraits.ChatAdvance:FireServer({"k"}) until textLabel.text == "Which slot would you like to play in?"
            repeat task.wait() bp.ServerTraits.ChatAdvance:FireServer({"Slot"..slotNum}) until textLabel.text == "Loading!"
            plr.CharacterAdded:Wait()
            local CFL = rs.Stepped:Connect(function()
                hrp.CFrame = currCF 
            end)
            task.wait(1)
            CFL:Disconnect()
        else
            notif("Commands:","Choose a number (1, 2, 3)")
        end
    elseif splits[1] == prefix.."rkey" then
        if splits[2]:len() == 1 then
            notif("Respawn:","Key set to: " .. splits[2])
            RSKey = splits[2]
        else
            notif("No key detected:","Default RKey is 'L'")
            RSKey = "L"
        end
    elseif splits[1] == prefix.."cy" then
        plr.PlayerGui.Chat.Frame:FindFirstChild("ChatChannelParentFrame").Visible = true
        plr.PlayerGui.Chat.Frame:FindFirstChild("ChatBarParentFrame").Position = UDim2.new(0, 0, 1, -42)
    -- elseif splits[1] == prefix.."autofarm" then |||| not working atm
        -- if splits[2] and findent(splits[2]) then
        --     local targ, largeNum = nil, math.huge
        --     autoFarm = true
        --     local AutoFarmVelo = Instance.new("BodyVelocity",hrp)
        --     AutoFarmVelo.Velocity = Vector3.new(0,0,0)
        --     AutoFarmVelo.Name = "AutoFarmVelo"
        -- elseif splits[2] == "stop" then
        --     autoFarm = false
        -- end
    elseif splits[1] == prefix.."anchor" then
        if splits[2] == "on" then
            hrp.Anchored = true
        elseif splits[2] == "off" then
            hrp.Anchored = false
        end
    elseif splits[1] == prefix.."nq" then
        for i,v in pairs(game.Workspace:GetChildren()) do
            if v.Name == "Wormhole" then
                if v:FindFirstChild("TouchInterest") then
                    v:Destroy()
                    notif("Cmds:","Wormhole Destroyed")
                else
                    notif("Cmds:","Wormhole already destroyed")
                end
            end
        end
    elseif splits[1] == prefix.."speed" then
        if splits[2] then
            if speedToggle == false then
                speedToggle = true
                speedSpam(splits[2])
            else
                speedToggle = false
            end
        end
    elseif splits[1] == prefix.."autofarm" then
        -- if splits[2] and findent(splits[2]) then

        -- end
    end
end)

plr:GetMouse().KeyDown:Connect(function(k)
    if k == RSKey then
        instaR()
    end
end)
